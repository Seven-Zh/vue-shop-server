{"version":3,"sources":["webpack:///./src/components/Goods/List.vue?67c2","webpack:///src/components/Goods/List.vue","webpack:///./src/components/Goods/List.vue?20b5","webpack:///./src/components/Goods/List.vue","webpack:///./src/components/Goods/Add.vue?678c","webpack:///src/components/Goods/Add.vue","webpack:///./src/components/Goods/Add.vue?b0a7","webpack:///./src/components/Goods/Add.vue","webpack:///./src/components/Goods/Edit.vue?5e5d","webpack:///./src/components/Goods/Edit.vue?3236","webpack:///src/components/Goods/Edit.vue","webpack:///./src/components/Goods/Edit.vue?2dac","webpack:///./src/components/Goods/Edit.vue","webpack:///./node_modules/core-js/modules/es.array.find-index.js","webpack:///./src/components/Goods/Add.vue?61c7"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","path","_v","on","getGoodsList","model","value","queryInfo","callback","$$v","$set","expression","slot","goAddPage","goodsList","scopedSlots","_u","key","fn","slotProps","_s","_f","row","add_time","staticClass","$event","goEditPage","goods_id","removeGoodById","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","staticRenderFns","data","query","created","methods","newSize","newNum","$router","push","id","component","activeIndex","ref","addGoodForm","addGoodFormRules","beforeTabLeave","tabClick","cateList","cateProps","handleChange","goods_cat","_n","_l","item1","attr_id","attr_name","item2","i","item","handlePreview","handleRemove","upHeaders","handleSuccess","addGood","previewiDalogVisible","previewPath","goods_name","goods_price","goods_weight","goods_number","pics","goods_introduce","label","children","expandTrigger","manyDataList","onlyDataList","Authorization","window","sessionStorage","getItem","getCateList","length","oldActiveName","$message","error","file","response","url","pic","temp","splice","meta","status","tmp_path","picInfo","$refs","addGoodFormRef","validate","computed","cateId","goodInfo","editGoodFormRules","submitEdit","getGoodInfo","console","log","goodInfoRef","goodId","$route","params","$","$findIndex","findIndex","addToUnscopables","arrayMethodUsesToLength","FIND_INDEX","SKIPS_HOLES","USES_TO_LENGTH","Array","target","proto","forced","callbackfn","arguments","undefined"],"mappings":"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","file":"js/List_Add_Edit.e6bcd51e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"商品管理\")]),_c('el-breadcrumb-item',[_vm._v(\"商品列表\")])],1),_c('el-card',[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},on:{\"clear\":_vm.getGoodsList,\"change\":_vm.getGoodsList},model:{value:(_vm.queryInfo.query),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"query\", $$v)},expression:\"queryInfo.query\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getGoodsList},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.goAddPage}},[_vm._v(\"添加商品\")])],1)],1),_c('el-table',{attrs:{\"data\":_vm.goodsList,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"label\":\"商品名称\",\"prop\":\"goods_name\"}}),_c('el-table-column',{attrs:{\"label\":\"商品价格\",\"prop\":\"goods_price\",\"width\":\"90px\"}}),_c('el-table-column',{attrs:{\"label\":\"商品重量\",\"prop\":\"goods_weight\",\"width\":\"80px\"}}),_c('el-table-column',{attrs:{\"label\":\"创建时间\",\"width\":\"140px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProps){return [_vm._v(\" \"+_vm._s(_vm._f(\"format\")(slotProps.row.add_time,'yyyy-MM-dd hh:mm:ss'))+\" \")]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"180px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(slotProps){return [_c('el-button',{staticClass:\"el-icon-edit\",attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.goEditPage(slotProps.row.goods_id)}}},[_vm._v(\"编辑 \")]),_c('el-button',{staticClass:\"el-icon-delete\",attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.removeGoodById(slotProps.row.goods_id)}}},[_vm._v(\" 删除\")])]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.queryInfo.pagenum,\"page-sizes\":[10, 20, 30, 40],\"page-size\":_vm.queryInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 面包屑导航 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <!-- 卡片视图区域 -->\r\n    <el-card>\r\n      <el-row :gutter=\"20\">\r\n        <!-- 搜索框 -->\r\n        <el-col :span=\"8\">\r\n          <el-input placeholder=\"请输入内容\" v-model=\"queryInfo.query\" clearable @clear=\"getGoodsList\"\r\n            @change=\"getGoodsList\">\r\n            <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"getGoodsList\"></el-button>\r\n          </el-input>\r\n        </el-col>\r\n        <!-- 添加商品按钮 -->\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"goAddPage\">添加商品</el-button>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <!-- 商品表格区域 -->\r\n      <el-table :data=\"goodsList\" border stripe>\r\n        <el-table-column type=\"index\"></el-table-column>\r\n        <el-table-column label=\"商品名称\" prop=\"goods_name\"></el-table-column>\r\n        <el-table-column label=\"商品价格\" prop=\"goods_price\" width=\"90px\"></el-table-column>\r\n        <el-table-column label=\"商品重量\" prop=\"goods_weight\" width=\"80px\"></el-table-column>\r\n        <el-table-column label=\"创建时间\" width=\"140px\">\r\n          <template v-slot=\"slotProps\">\r\n            {{slotProps.row.add_time | format('yyyy-MM-dd hh:mm:ss')}}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"180px\">\r\n          <template v-slot=\"slotProps\">\r\n            <el-button size=\"mini\" type=\"primary\" class=\"el-icon-edit\" @click=\"goEditPage(slotProps.row.goods_id)\">编辑\r\n            </el-button>\r\n            <el-button size=\"mini\" type=\"danger\" class=\"el-icon-delete\" @click=\"removeGoodById(slotProps.row.goods_id)\">\r\n              删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页区域 -->\r\n      <el-pagination @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryInfo.pagenum\" :page-sizes=\"[10, 20, 30, 40]\" :page-size=\"queryInfo.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\" :total=\"total\">\r\n      </el-pagination>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 获取商品列表的请求参数\r\n      queryInfo: {\r\n        query: '',\r\n        pagenum: 1,\r\n        pagesize: 10\r\n      },\r\n      // 商品总数\r\n      total: 0,\r\n      // 商品列表\r\n      goodsList: []\r\n    }\r\n  },\r\n  created() {\r\n    this.getGoodsList()\r\n  },\r\n  methods: {\r\n    // 发送请求获取商品列表\r\n    async getGoodsList() {\r\n      const { data: res } = await this.$http.get('goods', { params: this.queryInfo })\r\n      // 失败\r\n      if (res.meta.status !== 200) return this.$message.error('获取商品列表失败')\r\n      // 成功\r\n      this.goodsList = res.data.goods\r\n      this.total = res.data.total\r\n    },\r\n    // 监听pagesize变化\r\n    handleSizeChange(newSize) {\r\n      this.queryInfo.pagesize = newSize\r\n      // 重新渲染数据\r\n      this.getGoodsList()\r\n    },\r\n    // 监听pagenum变化\r\n    handleCurrentChange(newNum) {\r\n      this.queryInfo.pagenum = newNum\r\n      // 重新渲染数据\r\n      this.getGoodsList()\r\n    },\r\n    // 删除商品功能\r\n    async removeGoodById(id) {\r\n      // 弹窗\r\n      const confirmResult = await this.$confirm('此操作将永久删除该商品, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).catch(err => err)\r\n      if (confirmResult !== 'confirm') return this.$message.info('取消删除成功')\r\n      // 用户确认删除，发送请求\r\n      const { data: res } = await this.$http.delete('goods/' + id)\r\n      if (res.meta.status !== 200) return this.$message.error('删除用户失败')\r\n      this.$message.success('删除商品成功')\r\n      // 重新渲染数据\r\n      this.getGoodsList()\r\n    },\r\n    // 去往添加商品页面\r\n    goAddPage() {\r\n      this.$router.push('/goods/add')\r\n    },\r\n    // 去往编辑商品页面\r\n    goEditPage(id) {\r\n      this.$router.push('/goods/edit/' + id)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./List.vue?vue&type=template&id=70e2a91b&scoped=true&\"\nimport script from \"./List.vue?vue&type=script&lang=js&\"\nexport * from \"./List.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"70e2a91b\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"商品管理\")]),_c('el-breadcrumb-item',[_vm._v(\"添加商品\")])],1),_c('el-card',[_c('el-alert',{attrs:{\"title\":\"添加商品信息\",\"type\":\"info\",\"closable\":false,\"show-icon\":\"\",\"center\":\"\"}}),_c('el-steps',{attrs:{\"active\":_vm.activeIndex - 0,\"align-center\":\"\",\"finish-status\":\"success\"}},[_c('el-step',{attrs:{\"title\":\"基本信息\"}}),_c('el-step',{attrs:{\"title\":\"商品参数\"}}),_c('el-step',{attrs:{\"title\":\"商品属性\"}}),_c('el-step',{attrs:{\"title\":\"商品图片\"}}),_c('el-step',{attrs:{\"title\":\"商品内容\"}}),_c('el-step',{attrs:{\"title\":\"完成\"}})],1),_c('el-form',{ref:\"addGoodFormRef\",attrs:{\"model\":_vm.addGoodForm,\"rules\":_vm.addGoodFormRules,\"label-width\":\"100px\",\"label-position\":\"top\"}},[_c('el-tabs',{attrs:{\"tab-position\":\"left\",\"before-leave\":_vm.beforeTabLeave},on:{\"tab-click\":_vm.tabClick},model:{value:(_vm.activeIndex),callback:function ($$v) {_vm.activeIndex=$$v},expression:\"activeIndex\"}},[_c('el-tab-pane',{attrs:{\"label\":\"基本信息\",\"name\":\"0\"}},[_c('el-form-item',{attrs:{\"label\":\"商品分类\",\"prop\":\"goods_cat\"}},[_c('el-cascader',{attrs:{\"options\":_vm.cateList,\"props\":_vm.cateProps},on:{\"change\":_vm.handleChange},model:{value:(_vm.goods_cat),callback:function ($$v) {_vm.goods_cat=$$v},expression:\"goods_cat\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品名称\",\"prop\":\"goods_name\"}},[_c('el-input',{model:{value:(_vm.addGoodForm.goods_name),callback:function ($$v) {_vm.$set(_vm.addGoodForm, \"goods_name\", $$v)},expression:\"addGoodForm.goods_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品价格\",\"prop\":\"goods_price\"}},[_c('el-input',{model:{value:(_vm.addGoodForm.goods_price),callback:function ($$v) {_vm.$set(_vm.addGoodForm, \"goods_price\", _vm._n($$v))},expression:\"addGoodForm.goods_price\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品重量\",\"prop\":\"goods_weight\"}},[_c('el-input',{model:{value:(_vm.addGoodForm.goods_weight),callback:function ($$v) {_vm.$set(_vm.addGoodForm, \"goods_weight\", _vm._n($$v))},expression:\"addGoodForm.goods_weight\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品数量\",\"prop\":\"goods_number\"}},[_c('el-input',{model:{value:(_vm.addGoodForm.goods_number),callback:function ($$v) {_vm.$set(_vm.addGoodForm, \"goods_number\", _vm._n($$v))},expression:\"addGoodForm.goods_number\"}})],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"商品参数\",\"name\":\"1\"}},_vm._l((_vm.manyDataList),function(item1){return _c('el-form-item',{key:item1.attr_id,attrs:{\"label\":item1.attr_name}},[_c('el-checkbox-group',{model:{value:(item1.attr_vals),callback:function ($$v) {_vm.$set(item1, \"attr_vals\", $$v)},expression:\"item1.attr_vals\"}},_vm._l((item1.attr_vals),function(item2,i){return _c('el-checkbox',{key:i,attrs:{\"label\":item2,\"border\":\"\"}})}),1)],1)}),1),_c('el-tab-pane',{attrs:{\"label\":\"商品属性\",\"name\":\"2\"}},_vm._l((_vm.onlyDataList),function(item){return _c('el-form-item',{key:item.attr_id,attrs:{\"label\":item.attr_name}},[_c('el-input',{model:{value:(item.attr_vals),callback:function ($$v) {_vm.$set(item, \"attr_vals\", $$v)},expression:\"item.attr_vals\"}})],1)}),1),_c('el-tab-pane',{attrs:{\"label\":\"商品图片\",\"name\":\"3\"}},[_c('el-upload',{attrs:{\"action\":\"http://127.0.0.1:8888/api/private/v1/upload\",\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"list-type\":\"picture\",\"headers\":_vm.upHeaders,\"on-success\":_vm.handleSuccess}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")])],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"商品内容\",\"name\":\"4\"}},[_c('quill-editor',{model:{value:(_vm.addGoodForm.goods_introduce),callback:function ($$v) {_vm.$set(_vm.addGoodForm, \"goods_introduce\", $$v)},expression:\"addGoodForm.goods_introduce\"}}),_c('el-button',{staticClass:\"addBtn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addGood}},[_vm._v(\"添加商品\")])],1)],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"图片预览\",\"visible\":_vm.previewiDalogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.previewiDalogVisible=$event}}},[_c('img',{staticClass:\"previewImg\",attrs:{\"src\":_vm.previewPath,\"alt\":\"\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 面包屑导航 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>添加商品</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <!-- 卡片视图 -->\r\n    <el-card>\r\n      <!-- 提示区域 -->\r\n      <el-alert title=\"添加商品信息\" type=\"info\" :closable=\"false\" show-icon center>\r\n      </el-alert>\r\n\r\n      <!-- 步骤条区域 -->\r\n      <el-steps :active=\"activeIndex - 0\" align-center finish-status=\"success\">\r\n        <el-step title=\"基本信息\"></el-step>\r\n        <el-step title=\"商品参数\"></el-step>\r\n        <el-step title=\"商品属性\"></el-step>\r\n        <el-step title=\"商品图片\"></el-step>\r\n        <el-step title=\"商品内容\"></el-step>\r\n        <el-step title=\"完成\"></el-step>\r\n      </el-steps>\r\n\r\n      <el-form :model=\"addGoodForm\" :rules=\"addGoodFormRules\" ref=\"addGoodFormRef\" label-width=\"100px\"\r\n        label-position=\"top\">\r\n        <!-- tab栏区域 -->\r\n        <el-tabs tab-position=\"left\" v-model=\"activeIndex\" :before-leave=\"beforeTabLeave\" @tab-click=\"tabClick\">\r\n          <!-- 基本信息区域 -->\r\n          <el-tab-pane label=\"基本信息\" name=\"0\">\r\n            <!-- 级联选择器 选择商品分类-->\r\n            <el-form-item label=\"商品分类\" prop=\"goods_cat\">\r\n              <el-cascader v-model=\"goods_cat\" :options=\"cateList\" :props=\"cateProps\" @change=\"handleChange\">\r\n              </el-cascader>\r\n            </el-form-item>\r\n            <!-- 其他参数 -->\r\n            <el-form-item label=\"商品名称\" prop=\"goods_name\">\r\n              <el-input v-model=\"addGoodForm.goods_name\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"商品价格\" prop=\"goods_price\">\r\n              <el-input v-model.number=\"addGoodForm.goods_price\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"商品重量\" prop=\"goods_weight\">\r\n              <el-input v-model.number=\"addGoodForm.goods_weight\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"商品数量\" prop=\"goods_number\">\r\n              <el-input v-model.number=\"addGoodForm.goods_number\"></el-input>\r\n            </el-form-item>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"商品参数\" name=\"1\">\r\n            <!-- 渲染动态参数 -->\r\n            <!-- 循环manyDataList中的每一项 -->\r\n            <el-form-item v-for=\"item1 in manyDataList\" :key=\"item1.attr_id\" :label=\"item1.attr_name\">\r\n              <el-checkbox-group v-model=\"item1.attr_vals\">\r\n                <el-checkbox :label=\"item2\" v-for=\"(item2,i) in item1.attr_vals\" :key=\"i\" border></el-checkbox>\r\n              </el-checkbox-group>\r\n            </el-form-item>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"商品属性\" name=\"2\">\r\n            <!-- 渲染商品属性 -->\r\n            <el-form-item v-for=\"item in onlyDataList\" :key=\"item.attr_id\" :label=\"item.attr_name\">\r\n              <el-input v-model=\"item.attr_vals\"></el-input>\r\n            </el-form-item>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"商品图片\" name=\"3\">\r\n            <!-- 添加图片区域 -->\r\n            <el-upload action=\"http://127.0.0.1:8888/api/private/v1/upload\" :on-preview=\"handlePreview\"\r\n              :on-remove=\"handleRemove\" list-type=\"picture\" :headers=\"upHeaders\" :on-success=\"handleSuccess\">\r\n              <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n            </el-upload>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"商品内容\" name=\"4\">\r\n            <!-- 商品内容区域，富文本编辑器 -->\r\n            <quill-editor v-model=\"addGoodForm.goods_introduce\" />\r\n            <!-- 添加商品按钮 -->\r\n            <el-button type=\"primary\" class=\"addBtn\" @click=\"addGood\">添加商品</el-button>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </el-form>\r\n    </el-card>\r\n\r\n    <!-- 图片预览对话框 -->\r\n    <el-dialog title=\"图片预览\" :visible.sync=\"previewiDalogVisible\" width=\"50%\">\r\n      <img :src=\"previewPath\" alt=\"\" class=\"previewImg\">\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 激活的步骤条\r\n      activeIndex: 0,\r\n      // 添加商品的表单对象\r\n      addGoodForm: {\r\n        goods_name: '',\r\n        goods_price: '',\r\n        goods_weight: '',\r\n        goods_number: '',\r\n        // 图片临时路径\r\n        pics: [],\r\n        // 商品描述\r\n        goods_introduce: '',\r\n        // 商品的参数\r\n        attrs: []\r\n      },\r\n      // 商品所属分类数组,级联选择器绑定的数组\r\n      goods_cat: [],\r\n      // 添加商品的表单验证规则\r\n      addGoodFormRules: {\r\n        goods_name: [{ required: true, message: '请输入商品名称', trigger: 'blur' }],\r\n        goods_price: [{ required: true, message: '请输入商品价格', trigger: 'blur' },\r\n        { type: 'number', message: '请输入数字', trigger: 'blur' }],\r\n        goods_weight: [{ required: true, message: '请输入商品重量', trigger: 'blur' },\r\n        { type: 'number', message: '请输入数字', trigger: 'blur' }],\r\n        goods_number: [{ required: true, message: '请输入商品数量', trigger: 'blur' },\r\n        { type: 'number', message: '请输入数字', trigger: 'blur' }]\r\n      },\r\n      // 商品分类列表\r\n      cateList: [],\r\n      // 级联选择器配置\r\n      cateProps: {\r\n        label: 'cat_name',\r\n        value: 'cat_id',\r\n        children: 'children',\r\n        expandTrigger: 'hover'\r\n      },\r\n      // 动态参数列表\r\n      manyDataList: [],\r\n      // 静态属性列表\r\n      onlyDataList: [],\r\n      // 图片上传的请求头\r\n      upHeaders: {\r\n        Authorization: window.sessionStorage.getItem('token')\r\n      },\r\n      // 预览图片的临时链接\r\n      previewPath: '',\r\n      // 控制预览图片对话框显示隐藏\r\n      previewiDalogVisible: false\r\n    }\r\n  },\r\n  created() {\r\n    this.getCateList()\r\n  },\r\n  methods: {\r\n    // 获取商品分类\r\n    async getCateList() {\r\n      const { data: res } = await this.$http.get('categories')\r\n      if (res.meta.status !== 200) return this.$message.error('获取商品分类失败')\r\n      this.cateList = res.data\r\n    },\r\n    // 级联选择器选项改变触发\r\n    handleChange() {\r\n      // 阻止选中三级以外的分类\r\n      if (this.goods_cat.length !== 3) {\r\n        this.goods_cat = []\r\n      }\r\n    },\r\n    // tab栏切换之前触发，可以阻止tab栏切换\r\n    beforeTabLeave(activeName, oldActiveName) {\r\n      // 如果处于第一个tab栏并且没有选择商品分类，组织切换tab栏\r\n      if (oldActiveName === '0' && this.goods_cat.length !== 3) {\r\n        this.$message.error('请先选择商品分类')\r\n        return false\r\n      }\r\n    },\r\n    // 点击tab栏获取数据\r\n    async tabClick() {\r\n      // 判断在哪个tab栏\r\n      if (this.activeIndex === '1') {\r\n        // 发送请求获取动态参数列表\r\n        const { data: res } = await this.$http.get(`categories/${this.cateId}/attributes`, { params: { sel: 'many' } })\r\n        // 失败\r\n        if (res.meta.status !== 200) return this.$message.error('获取动态参数失败')\r\n        // 成功\r\n        // 赋值之前把每一项的attr_vals转换为数组\r\n        res.data.forEach(item => {\r\n          item.attr_vals = item.attr_vals ? item.attr_vals.split(',') : []\r\n        })\r\n        this.manyDataList = res.data\r\n      } else if (this.activeIndex === '2') {\r\n        // 发送请求获取静态属性\r\n        const { data: res } = await this.$http.get(`categories/${this.cateId}/attributes`, { params: { sel: 'only' } })\r\n        // 失败\r\n        if (res.meta.status !== 200) return this.$message.error('获取动态参数失败')\r\n        // 成功\r\n        this.onlyDataList = res.data\r\n      }\r\n    },\r\n    // 处理图片预览效果\r\n    handlePreview(file) {\r\n      // 保存图片临时链接到data中\r\n      this.previewPath = file.response.data.url\r\n      this.previewiDalogVisible = true\r\n    },\r\n    // 移除图片的函数\r\n    handleRemove(file) {\r\n      // 在addGoodForm.pics中找到对应的临时路径并移除\r\n      const temp = file.response.data.tmp_path\r\n      // 找到索引号\r\n      const i = this.addGoodForm.pics.findIndex(item => {\r\n        return item.pic === temp\r\n      })\r\n      this.addGoodForm.pics.splice(i, 1)\r\n    },\r\n    // 图片上传成功后，将临时路径保存到请求参数中\r\n    handleSuccess(response) {\r\n      if (response.meta.status === 200) {\r\n        const picInfo = {\r\n          pic: response.data.tmp_path\r\n        }\r\n        // 将临时路径保存到请求参数中\r\n        this.addGoodForm.pics.push(picInfo)\r\n      }\r\n    },\r\n    // 发送请求添加商品\r\n    addGood() {\r\n      // 先预验证\r\n      this.$refs.addGoodFormRef.validate(async valid => {\r\n        if (!valid) return this.$message.error('请填写必要的表单项')\r\n        // 发送请求之前，需要处理表单数据\r\n        // 处理goods_cat，将goods_cat转换为字符串保存到addGoodForm中\r\n        this.addGoodForm.goods_cat = this.goods_cat.join(',')\r\n        // 处理attrs\r\n        // 循环manyDataList,获取动态参数\r\n        this.manyDataList.forEach(item => {\r\n          const newInfo = { attr_id: item.attr_id, attr_value: item.attr_vals.join(',') }\r\n          // 把动态参数添加到attrs中\r\n          this.addGoodForm.attrs.push(newInfo)\r\n        })\r\n        // 循环onlyDataList,获取动态参数\r\n        this.onlyDataList.forEach(item => {\r\n          const newInfo = { attr_id: item.attr_id, attr_value: item.attr_vals }\r\n          // 把静态属性添加到attrs中\r\n          this.addGoodForm.attrs.push(newInfo)\r\n        })\r\n        // 发送请求添加商品\r\n        const { data: res } = await this.$http.post('goods', this.addGoodForm)\r\n        if (res.meta.status !== 201) return this.$message.error(res.meta.message)\r\n        // 添加成功，导航到商品列表页面\r\n        this.$message.success('添加商品成功')\r\n        this.$router.push('/goods')\r\n      })\r\n    }\r\n  },\r\n  computed: {\r\n    cateId() {\r\n      if (this.goods_cat.length === 3) {\r\n        return this.goods_cat[2]\r\n      } else {\r\n        return null\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.el-checkbox {\r\n  margin: 0 10px 0 0 !important;\r\n}\r\n\r\n.previewImg {\r\n  width: 100%;\r\n}\r\n\r\n.addBtn {\r\n  margin-top: 15px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Add.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Add.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Add.vue?vue&type=template&id=6c4e1718&scoped=true&\"\nimport script from \"./Add.vue?vue&type=script&lang=js&\"\nexport * from \"./Add.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Add.vue?vue&type=style&index=0&id=6c4e1718&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c4e1718\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=style&index=0&id=df3b34a8&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=style&index=0&id=df3b34a8&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"商品管理\")]),_c('el-breadcrumb-item',[_vm._v(\"添加商品\")])],1),_c('el-card',[_c('el-alert',{attrs:{\"title\":\"修改商品信息\",\"type\":\"danger\",\"closable\":false,\"show-icon\":\"\",\"center\":\"\"}}),_c('el-steps',{attrs:{\"active\":_vm.activeIndex - 0,\"align-center\":\"\",\"finish-status\":\"success\"}},[_c('el-step',{attrs:{\"title\":\"基本信息\"}}),_c('el-step',{attrs:{\"title\":\"商品参数\"}}),_c('el-step',{attrs:{\"title\":\"商品属性\"}}),_c('el-step',{attrs:{\"title\":\"商品图片\"}}),_c('el-step',{attrs:{\"title\":\"商品内容\"}}),_c('el-step',{attrs:{\"title\":\"完成\"}})],1),_c('el-form',{ref:\"goodInfoRef\",attrs:{\"model\":_vm.goodInfo,\"rules\":_vm.editGoodFormRules,\"label-width\":\"100px\",\"label-position\":\"top\"}},[_c('el-tabs',{attrs:{\"tab-position\":\"left\"},model:{value:(_vm.activeIndex),callback:function ($$v) {_vm.activeIndex=$$v},expression:\"activeIndex\"}},[_c('el-tab-pane',{attrs:{\"label\":\"基本信息\",\"name\":\"0\"}},[_c('el-form-item',{attrs:{\"label\":\"商品名称\",\"prop\":\"goods_name\"}},[_c('el-input',{model:{value:(_vm.goodInfo.goods_name),callback:function ($$v) {_vm.$set(_vm.goodInfo, \"goods_name\", $$v)},expression:\"goodInfo.goods_name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品价格\",\"prop\":\"goods_price\"}},[_c('el-input',{model:{value:(_vm.goodInfo.goods_price),callback:function ($$v) {_vm.$set(_vm.goodInfo, \"goods_price\", _vm._n($$v))},expression:\"goodInfo.goods_price\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品重量\",\"prop\":\"goods_weight\"}},[_c('el-input',{model:{value:(_vm.goodInfo.goods_weight),callback:function ($$v) {_vm.$set(_vm.goodInfo, \"goods_weight\", _vm._n($$v))},expression:\"goodInfo.goods_weight\"}})],1),_c('el-form-item',{attrs:{\"label\":\"商品数量\",\"prop\":\"goods_number\"}},[_c('el-input',{model:{value:(_vm.goodInfo.goods_number),callback:function ($$v) {_vm.$set(_vm.goodInfo, \"goods_number\", _vm._n($$v))},expression:\"goodInfo.goods_number\"}})],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"商品参数\",\"name\":\"1\"}},_vm._l((_vm.manyDataList),function(item1){return _c('el-form-item',{key:item1.attr_id,attrs:{\"label\":item1.attr_name}},[_c('el-checkbox-group',{model:{value:(item1.attr_vals),callback:function ($$v) {_vm.$set(item1, \"attr_vals\", $$v)},expression:\"item1.attr_vals\"}},_vm._l((item1.attr_vals),function(item2,i){return _c('el-checkbox',{key:i,attrs:{\"label\":item2,\"border\":\"\"}})}),1)],1)}),1),_c('el-tab-pane',{attrs:{\"label\":\"商品属性\",\"name\":\"2\"}},_vm._l((_vm.onlyDataList),function(item){return _c('el-form-item',{key:item.attr_id,attrs:{\"label\":item.attr_name}},[_c('el-input',{model:{value:(item.attr_vals),callback:function ($$v) {_vm.$set(item, \"attr_vals\", $$v)},expression:\"item.attr_vals\"}})],1)}),1),_c('el-tab-pane',{attrs:{\"label\":\"商品图片\",\"name\":\"3\"}},[_c('el-upload',{attrs:{\"action\":\"http://127.0.0.1:8888/api/private/v1/upload\",\"on-preview\":_vm.handlePreview,\"on-remove\":_vm.handleRemove,\"list-type\":\"picture\",\"headers\":_vm.upHeaders,\"on-success\":_vm.handleSuccess}},[_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"primary\"}},[_vm._v(\"点击上传\")])],1)],1),_c('el-tab-pane',{attrs:{\"label\":\"商品内容\",\"name\":\"4\"}},[_c('quill-editor',{model:{value:(_vm.goodInfo.goods_introduce),callback:function ($$v) {_vm.$set(_vm.goodInfo, \"goods_introduce\", $$v)},expression:\"goodInfo.goods_introduce\"}}),_c('el-button',{staticClass:\"addBtn\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitEdit}},[_vm._v(\"修改商品\")])],1)],1)],1)],1),_c('el-dialog',{attrs:{\"title\":\"图片预览\",\"visible\":_vm.previewiDalogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.previewiDalogVisible=$event}}},[_c('img',{staticClass:\"previewImg\",attrs:{\"src\":_vm.previewPath,\"alt\":\"\"}})])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <!-- 面包屑导航 -->\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>添加商品</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n\r\n    <!-- 卡片视图 -->\r\n    <el-card>\r\n      <!-- 提示区域 -->\r\n      <el-alert title=\"修改商品信息\" type=\"danger\" :closable=\"false\" show-icon center>\r\n      </el-alert>\r\n\r\n      <!-- 步骤条区域 -->\r\n      <el-steps :active=\"activeIndex - 0\" align-center finish-status=\"success\">\r\n        <el-step title=\"基本信息\"></el-step>\r\n        <el-step title=\"商品参数\"></el-step>\r\n        <el-step title=\"商品属性\"></el-step>\r\n        <el-step title=\"商品图片\"></el-step>\r\n        <el-step title=\"商品内容\"></el-step>\r\n        <el-step title=\"完成\"></el-step>\r\n      </el-steps>\r\n\r\n      <el-form :model=\"goodInfo\" :rules=\"editGoodFormRules\" ref=\"goodInfoRef\" label-width=\"100px\" label-position=\"top\">\r\n        <!-- tab栏区域 -->\r\n        <el-tabs tab-position=\"left\" v-model=\"activeIndex\">\r\n          <!-- 基本信息区域 -->\r\n          <el-tab-pane label=\"基本信息\" name=\"0\">\r\n            <!-- 其他参数 -->\r\n            <el-form-item label=\"商品名称\" prop=\"goods_name\">\r\n              <el-input v-model=\"goodInfo.goods_name\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"商品价格\" prop=\"goods_price\">\r\n              <el-input v-model.number=\"goodInfo.goods_price\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"商品重量\" prop=\"goods_weight\">\r\n              <el-input v-model.number=\"goodInfo.goods_weight\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"商品数量\" prop=\"goods_number\">\r\n              <el-input v-model.number=\"goodInfo.goods_number\"></el-input>\r\n            </el-form-item>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"商品参数\" name=\"1\">\r\n            <!-- 渲染动态参数 -->\r\n            <!-- 循环manyDataList中的每一项 -->\r\n            <el-form-item v-for=\"item1 in manyDataList\" :key=\"item1.attr_id\" :label=\"item1.attr_name\">\r\n              <el-checkbox-group v-model=\"item1.attr_vals\">\r\n                <el-checkbox :label=\"item2\" v-for=\"(item2,i) in item1.attr_vals\" :key=\"i\" border></el-checkbox>\r\n              </el-checkbox-group>\r\n            </el-form-item>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"商品属性\" name=\"2\">\r\n            <!-- 渲染商品属性 -->\r\n            <el-form-item v-for=\"item in onlyDataList\" :key=\"item.attr_id\" :label=\"item.attr_name\">\r\n              <el-input v-model=\"item.attr_vals\"></el-input>\r\n            </el-form-item>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"商品图片\" name=\"3\">\r\n            <!-- 添加图片区域 -->\r\n            <el-upload action=\"http://127.0.0.1:8888/api/private/v1/upload\" :on-preview=\"handlePreview\"\r\n              :on-remove=\"handleRemove\" list-type=\"picture\" :headers=\"upHeaders\" :on-success=\"handleSuccess\">\r\n              <el-button size=\"small\" type=\"primary\">点击上传</el-button>\r\n            </el-upload>\r\n          </el-tab-pane>\r\n          <el-tab-pane label=\"商品内容\" name=\"4\">\r\n            <!-- 商品内容区域，富文本编辑器 -->\r\n            <quill-editor v-model=\"goodInfo.goods_introduce\" />\r\n            <!-- 添加商品按钮 -->\r\n            <el-button type=\"primary\" class=\"addBtn\" @click=\"submitEdit\">修改商品</el-button>\r\n          </el-tab-pane>\r\n        </el-tabs>\r\n      </el-form>\r\n    </el-card>\r\n\r\n    <!-- 图片预览对话框 -->\r\n    <el-dialog title=\"图片预览\" :visible.sync=\"previewiDalogVisible\" width=\"50%\">\r\n      <img :src=\"previewPath\" alt=\"\" class=\"previewImg\">\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      // 商品信息\r\n      goodInfo: {},\r\n      // 步骤条和tab栏绑定的数据\r\n      activeIndex: 0,\r\n      editGoodFormRules: {\r\n        goods_name: [{ required: true, message: '请输入商品名称', trigger: 'blur' }],\r\n        goods_price: [{ required: true, message: '请输入商品价格', trigger: 'blur' },\r\n        { type: 'number', message: '请输入数字', trigger: 'blur' }],\r\n        goods_weight: [{ required: true, message: '请输入商品重量', trigger: 'blur' },\r\n        { type: 'number', message: '请输入数字', trigger: 'blur' }],\r\n        goods_number: [{ required: true, message: '请输入商品数量', trigger: 'blur' },\r\n        { type: 'number', message: '请输入数字', trigger: 'blur' }]\r\n      },\r\n      // 动态参数\r\n      manyDataList: [],\r\n      // 静态属性\r\n      onlyDataList: [],\r\n      // 图片上传的请求头\r\n      upHeaders: {\r\n        Authorization: window.sessionStorage.getItem('token')\r\n      },\r\n      // 预览图片的临时链接\r\n      previewPath: '',\r\n      // 控制预览图片对话框显示隐藏\r\n      previewiDalogVisible: false\r\n    }\r\n  },\r\n  created() {\r\n    this.getGoodInfo()\r\n  },\r\n  methods: {\r\n    // 根据id查询商品信息\r\n    async getGoodInfo() {\r\n      // 发送请求\r\n      const { data: res } = await this.$http.get('goods/' + this.goodId)\r\n      this.goodInfo = res.data\r\n      // 处理数据，将attrs转换为动态参数和静态属性存储到data\r\n      // 处理动态参数\r\n      const manyDataList = res.data.attrs.filter(item => {\r\n        return item.attr_sel === 'many'\r\n      })\r\n      manyDataList.forEach(item => {\r\n        item.attr_vals = item.attr_vals.split(',')\r\n      })\r\n      this.manyDataList = manyDataList\r\n      // 处理静态属性\r\n      const onlyDataList = res.data.attrs.filter(item => {\r\n        return item.attr_sel === 'only'\r\n      })\r\n      this.onlyDataList = onlyDataList\r\n      // 将图片属性清空\r\n      this.goodInfo.pics = []\r\n      // 清空attrs属性\r\n      this.goodInfo.attrs = []\r\n    },\r\n    // 处理图片预览效果\r\n    handlePreview(file) {\r\n      // 保存图片临时链接到data中\r\n      this.previewPath = file.response.data.url\r\n      this.previewiDalogVisible = true\r\n    },\r\n    // 移除图片的函数\r\n    handleRemove(file) {\r\n      // 在addGoodForm.pics中找到对应的临时路径并移除\r\n      const temp = file.response.data.tmp_path\r\n      // 找到索引号\r\n      const i = this.goodInfo.pics.findIndex(item => {\r\n        return item.pic === temp\r\n      })\r\n      this.addGoodForm.pics.splice(i, 1)\r\n    },\r\n    // 图片上传成功后，将临时路径保存到请求参数中\r\n    handleSuccess(response) {\r\n      if (response.meta.status === 200) {\r\n        const picInfo = {\r\n          pic: response.data.tmp_path\r\n        }\r\n        // 将临时路径保存到请求参数中\r\n        this.goodInfo.pics.push(picInfo)\r\n        console.log(this.goodInfo)\r\n      }\r\n    },\r\n    // 发送请求提交编辑\r\n    submitEdit() {\r\n      // 预验证\r\n      this.$refs.goodInfoRef.validate(async valid => {\r\n        if (!valid) return this.$message.error('请填写必要的表单项')\r\n        // 处理attrs\r\n        // 循环manyDataList,获取动态参数\r\n        this.manyDataList.forEach(item => {\r\n          const newInfo = { attr_id: item.attr_id, attr_value: item.attr_vals.join(',') }\r\n          // 把动态参数添加到attrs中\r\n          this.goodInfo.attrs.push(newInfo)\r\n        })\r\n        // 循环onlyDataList,获取动态参数\r\n        this.onlyDataList.forEach(item => {\r\n          const newInfo = { attr_id: item.attr_id, attr_value: item.attr_vals }\r\n          // 把静态属性添加到attrs中\r\n          this.goodInfo.attrs.push(newInfo)\r\n        })\r\n        // 发送请求\r\n        const { data: res } = await this.$http.put('goods/' + this.goodId, this.goodInfo)\r\n        if (res.meta.status !== 200) return this.$message.error(res.meta.message)\r\n        // 添加成功，导航到商品列表页面\r\n        this.$message.success('修改商品信息成功')\r\n        this.$router.push('/goods')\r\n      })\r\n    }\r\n  },\r\n  computed: {\r\n    // 计算商品id\r\n    goodId() {\r\n      return this.$route.params.id\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.el-checkbox {\r\n  margin: 0 10px 0 0 !important;\r\n}\r\n\r\n.previewImg {\r\n  width: 100%;\r\n}\r\n\r\n.addBtn {\r\n  margin-top: 15px;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Edit.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Edit.vue?vue&type=template&id=df3b34a8&scoped=true&\"\nimport script from \"./Edit.vue?vue&type=script&lang=js&\"\nexport * from \"./Edit.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Edit.vue?vue&type=style&index=0&id=df3b34a8&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"df3b34a8\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength(FIND_INDEX);\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES || !USES_TO_LENGTH }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Add.vue?vue&type=style&index=0&id=6c4e1718&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Add.vue?vue&type=style&index=0&id=6c4e1718&lang=less&scoped=true&\""],"sourceRoot":""}